# 使い方ガイド

## 初回セットアップ

### 1. Claude API キーの取得と設定

1. https://console.anthropic.com/ にアクセス
2. アカウントにログイン（または新規登録）
3. API Keysセクションで新しいキーを作成
4. キーをコピー
5. プロジェクトの `.env` ファイルを開く
6. 以下のように設定：

```env
ANTHROPIC_API_KEY=sk-ant-api03-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

### 2. アプリの起動

ターミナルで以下を実行：

```bash
npm run dev:all
```

ブラウザで http://localhost:3001 を開きます。

## 基本的な使い方

### ステップ1: PDFページの表示

アプリを開くと、`PDFs` フォルダ内のPDFドリルが自動的に表示されます。

### ステップ2: ページ移動

- 「前のページ」「次のページ」ボタンでページを移動できます
- ページ番号も表示されます（例: 1 / 20）

### ステップ3: 解答を書き込む

1. **ペンモードを有効化**
   - 「ペンモード」ボタンをクリック
   - ボタンが緑色になり「✓ ペンモード」と表示されます

2. **解答を書く**
   - マウスをドラッグして文字や数字を書きます
   - タッチパッド/タッチスクリーンでも利用可能
   - 赤色のペンで描画されます

3. **間違えた場合**
   - 「クリア」ボタンで手書き部分をすべて消去できます
   - ペンモードを解除して、オブジェクトを選択・削除も可能

### ステップ4: 採点する

1. 解答を書き終わったら「採点する」ボタンをクリック
2. 画像がClaude APIに送信されます（数秒かかります）
3. 採点結果がポップアップで表示されます

### ステップ5: 結果を確認

採点結果には以下が含まれます：

- **問題ごとの結果**
  - 正解/不正解の判定（✓または✗）
  - あなたの解答
  - 正しい解答（不正解の場合）
  - フィードバック
  - 詳しい解説

- **全体コメント**
  - 学習のアドバイスや励まし

結果ウィンドウは「閉じる」ボタンで閉じられます。

## Tips

### より正確な採点のために

- **丁寧に書く**: 手書き文字は読みやすく書きましょう
- **適切なサイズ**: 小さすぎず、大きすぎず
- **問題ごとに区別**: 問題の近くに解答を書くとAIが認識しやすい

### 効率的な学習

1. まず自分で解いてみる
2. 採点して間違いを確認
3. 解説を読んで理解する
4. 「クリア」して再度解いてみる
5. 次のページに進む

### トラブルシューティング

**Q: PDFが表示されない**
- PDFsフォルダに正しくPDFが配置されているか確認
- ブラウザのコンソールでエラーを確認

**Q: 採点ボタンを押してもエラーになる**
- `.env` ファイルにAPIキーが正しく設定されているか確認
- APIサーバー（3002番ポート）が起動しているか確認
- ネットワーク接続を確認

**Q: 手書きが反映されない**
- 「ペンモード」が有効になっているか確認（緑色のボタン）
- ブラウザをリロードしてみる

**Q: 採点結果が正確でない**
- より丁寧に文字を書く
- 問題文と解答を明確に区別する
- Claude APIは画像認識のため、100%の精度ではありません

## ショートカット（今後実装予定）

- Ctrl + Z: 元に戻す
- Ctrl + Y: やり直し
- E: 消しゴムモード
- P: ペンモード

## サポート

問題が発生した場合は、以下を確認してください：

1. Node.jsのバージョン（推奨: v18以上）
2. npmパッケージが正しくインストールされているか
3. APIキーが有効か
4. ブラウザのコンソールログ
5. サーバーのログ出力

楽しく学習してください！
